<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body onload="initialize()">
    <canvas id="canvas" width="700" height="700" style="position:absolute;top:10%;left:10%;border:2px solid;"></canvas>

<script type="application/javascript">
    var can, element;
    function initialize() {
         can = document.getElementById("canvas");
        element = new LineDrawer(can);
    }
</script>
<script>
    'use strict'
    function LineDrawer(canvas) {
        this.canvas = canvas;
        this.prevX = 0;
        this.prevY = 0;
        this.currX = 0;
        this.currY = 0;
        this.flag = false;
        this.dot_flag = false;
        this.ctx = this.canvas.getContext("2d");
        this.strokeStyle = "black";
        this.lineWidth = 5;
        this.addEventListener();
    }

    LineDrawer.prototype.addEventListener = function () {
        var _this = this;
        this.canvas.addEventListener("click", function (event) {
            _this.getCoordinates("click", event);
        }, false);
        this.canvas.addEventListener("mouseup", function (event) {
            _this.getCoordinates("up", event);
        }, false);

        this.canvas.addEventListener("mousemove", function (event) {
            _this.getCoordinates("move", event);
        }, false);
        this.canvas.addEventListener("mousedown", function (event) {
            _this.getCoordinates("down", event);
        }, false);
    };
    LineDrawer.prototype.drawLine = function () {
        this.ctx.beginPath();
        this.ctx.moveTo(this.prevX, this.prevY);
        this.ctx.lineTo(this.currX, this.currY);
        this.ctx.strokeStyle = this.strokeStyle;
        this.ctx.lineWidth = this.lineWidth;
        this.ctx.stroke();
        this.ctx.closePath();
    };
    LineDrawer.prototype.getCoordinates = function (action, event) {
        switch(action){
            case "down":
                this.prevX = event.clientX - this.canvas.offsetLeft;
                this.prevY = event.clientY - this.canvas.offsetTop;
                break;
            case "move":
                this.currX = event.clientX - this.canvas.offsetLeft;
                this.currY = event.clientY - this.canvas.offsetTop;
                break;
            case "click":
                this.prevX = this.currX;
                this.prevY = this.currY;
                this.currX = event.clientX - this.canvas.offsetLeft;
                this.currY = event.clientY - this.canvas.offsetTop;
                break;
            case "up":
                this.drawLine();
            case "out":
                this.flag = false;
                break;
        }
    };
</script>
</body>
</html>